<html>
<head>
	<meta charset="utf-8">
	<title>Examen CPP ZZ2 - 20230328</title>
	<style>
        body {
        	padding-top:3em;
        	width:90%;
        	margin: auto;
        }

		p, h1, h2, li {
		 font-family: "Arial";
		 text-align : justify;
		}
		h2 {
		border-bottom: .2em dotted #B0CBF4;
}
       .imp{
       	   width:80%;
     margin:0.5em auto 0.5em auto;
     padding:0.5em 1em 0.5em 4em;    
     border-radius:0.5em;
     box-shadow:  0 0.5em 1em 0.2em rgba(0,0,0,0.56);
     color : white;
     background-color: purple
       }

       code {
       	background-color: #f5f2f0;
 		border-radius:0.2em;
       	display: inline-block;
       	padding-left:0.25em;
       	padding-right:0.25em;
       	font-size:120%;
       }
	</style>
</head>
<body>
<h1>Examen de C++ - ZZ2 - 28/03/2023</h1>


<h2>Consignes générales</h2>

<p>Voici votre examen de C++ ZZ2. Lisez tout le sujet avant de commencer : un certain nombre de tests ont été écrits pour être indépendants ou avec peu d'influence sur les autres.</p>

<p class="imp">&Agrave; la fin de l'examen, vous devez laisser un programme qui compile.</p>

<p>Pour plus de simplicité, vous DEVEZ utiliser trois fichiers en plus de <code>main.cpp</code> : <code>tests.cpp</code>, <code>ferme.hpp</code> et <code>ferme.cpp</code>. Ne changez pas la casse et n'ajoutez pas de fichiers, cela casserait la chaine de compilation et engendrerait une note nulle.</p>

<p>Toutes les déclarations seront dans l'entête, les définitions/implémentations seront dans le cpp. </p>

<p>La ligne de compilation est la suivante :</p>
<blockquote>
<code>make</code>
</blockquote>
</p>

<p>Si besoin, vous pouvez faire un <code>make clean</code>. La première compilation de la bibliothèque Catch est un peu longue, comme d'habitude</p>

<p>Ne jamais recommenter un test qui a réussi. Tous les tests décommentés doivent compiler dans le même temps (sauf mention contraire).</p>

<p>Pour garder une trace exécutable de votre programme sans stress supplémentaire :</p>
<ul>
<li>Vous pouvez utiliser GIT. Un rappel des commandes GIT est fait à la fin de l'énoncé. La correction s'interessera uniquement à la version disponible.</li>
<li>Si vous préférez faire des copies de répertoires, tous les sous-répertoires de votre $HOME sont analysés et seul le code menant à une meilleure note que les autres est gardé.</li>
</ul>

<p style="text-align:center;font-size:2em"><a href="https://en.cppreference.com/w/" target="_blank">DOCUMENTATION CPP</a></p>

<h2>Sujet</h2>

<p>Vous allez plus ou moins implémenter le diagramme UML ci-dessous. Toute ressemblance avec un autre examen serait purement fortuite.</p>

<img src="ferme.svg" style="display:inline-block;max-width:80%;margin-left:20%">

<ul>
	<li>Créer une classe <code>Produit</code> qui permet de représenter une produit avec un <code>nom</code> [Produit1]</li>
	<li>Deux produits sont égaux s'ils portent le même nom [Produit2]</li> 
	<li>On propose un opérateur de comparaison [Produit3] et un opérateur de redirection [Produit4]</li> 

    <li>Créer une exception <code>PeutPasProduireException</code>. Si vous ne savez pas, c'est pas grave ! [Exception1]</li>
</ul>
<p>Pour les tests suivants, il y a une relation entre <code>Vache</code> et <code>Animal</code> que les tests n'exploitent pas.</codez></p>
<ul>
    <li>Créer une classe <code>Vache</code> qui possede un <code>surnom</code> et qui produit du lait [Vache1]</li>
	<li>La vache meugle [Vache2]</li>
	<li>Si la vache est malade, elle ne peut pas produire de lait [Vache3]</li>
</ul>

<p>Pour les tests suivants, on utilise la relation d'héritage entre la classe <code>Poule</code> et <code>Animal</code>. Vous devez donc construire les classes en même temps.</p>
<ul>
    <li>Créer une classe <code>Poule</code> qui possede un <code>surnom</code> et qui produit un oeuf [Poule1]</li>
	<li>La poule glousse [Poule2]</li>
	<li>Si une poule est malade, elle ne peut pas produire [Poule3]</li>
</ul>

<ul>
	<li>Ajouter un attribut de classe <code>compteur</code> à la classe <code>Animal</code>. Ce compteur est incrémenté à chaque nouvelle instance [Animal1, Animal2] </li>
	<li>Créer un classe <code>Communiquer</code>. Tous les animaux communiquent et on associe dans chaque classe le mode de communication [Communiquer1, Communiquer2]</li>
	<li>On vérifiera que les classes <code>Communiquer</code> et <code>Animal</code> ne sont pas instanciables</li>
</ul>

<p>On va maintenant passer à la classe <code>Ferme</code>. La manière de stocker les animaux n'est pas importante mais vous devez pouvoir ajouter et enlever des animaux, les rechercher par leur nom, voire les trier</p>

<ul>
	<li>Instancier une ferme ne crée pas d'animaux [Ferme1]</li>
	<li>Acheter des animaux permet de peupler la ferme [Ferme2]</li>
	<li>Lorsque les animaux de la ferme sont nourris, ils communiquent [Ferme3]</li>
	<li>Un animal vendu n'est plus comptabilisé dans la ferme [Ferme4, Ferme5]</li>
	<li>Vous n'avez peut-être pas remarqué mais les animaux sont nourris dans un certain ordre : d'abord les poules puis les vaches et dans l'ordre lexicographique pour chaque "categorie". </li>
</ul>

<p>Pour la dernière question, vous avez plein de manière de faire, mais on peut reconnaître un animal à sa manière de communiquer.</p>

<p>Il n'y a pas de fuite mémoire à votre programme !</p>

<h2>Commandes GIT</h2>

<p>Préparation du compte (1 fois, au début) :</p>

<blockquote><code>
git config --global user.name "un_nom"
git config --global user.email "un_mail"
</code></blockquote>

<p>Préparation du répertoire :</p>
<blockquote><code>
git init
</code></blockquote>

<p>&Agrave; chaque nouveau fichier:</p>
<blockquote><code>
git add fichier
git add *
</code></blockquote>

<p>Sauvegarder / Committer :</p>
<blockquote><code>
git commit -am "commentaire"
</code></blockquote>

<p><code>git log</code> permet d'avoir la liste des sauvegardes avec un numéro de hachage</p>

<p>Pour revenir en arrière : </p>
<blockquote><code>
git checkout numero_de_hash <br>
OU git revert numero_de_hash
</code></blockquote>


